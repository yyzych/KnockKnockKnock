<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>imgAreaSelect</title>
	<style>
		input{
			width:70px;
		}
	</style>
	<link rel="stylesheet" type="text/css" href="css/imgareaselect-default.css" />
	<script type="text/javascript" src="scripts/jquery.min.js"></script>
	<script type="text/javascript" src="scripts/jquery.imgareaselect.pack.js"></script>
</head>
<body>
	<div class="frame" style="width: 300px; height: 300px;float:left;margin-right:50px">
		<img id="photo" src="http://sandbox.runjs.cn/uploads/rs/351/8eazlvc1/flower2.jpg"></div>
	<div id="preview" style="width: 100px; height: 100px; overflow: hidden;">
		<img src="http://sandbox.runjs.cn/uploads/rs/351/8eazlvc1/flower2.jpg" style="width: 100px; height: 100px;"></div>
	<br/>
	<br/>
	<form action="youraction" method="post">
		x :
		<input id="startX" name="startX" readonly="readonly"/>
		y :
		<input id="startY" name="startY" readonly="readonly"/>
		<br/>
		宽:
		<input id="width" name="width" readonly="readonly"/>
		高:
		<input id="height" name="height" readonly="readonly"/>
	</form>
	<script type="text/javascript">
		function preview(img, selection) {
			if (!selection.width || !selection.height)
				return;
			var scaleX = 100 / selection.width;//100指预览的窗口的大小
			var scaleY = 100 / selection.height;

			$('#preview img').css({
				width : Math.round(scaleX * 300),//300指原来的图片的大小
				height : Math.round(scaleY * 300),
				marginLeft : -Math.round(scaleX * selection.x1),
				marginTop : -Math.round(scaleY * selection.y1)
			});
			
			$("#startX").val(selection.x1);
			$("#startY").val(selection.y1);
			$("#width").val(selection.width);
			$("#height").val(selection.height);
		}
		
		$(function() {
			$('#photo').imgAreaSelect({
				aspectRatio : '1:1',
				handles : true,
				fadeSpeed : 200,
				onSelectChange : preview
			});
		});
	</script>
</body>
</html>